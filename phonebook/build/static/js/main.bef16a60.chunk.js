(this.webpackJsonpp2epbook=this.webpackJsonpp2epbook||[]).push([[0],{ 20:function(e,n,t){},41:function(e,n,t){'use strict';t.r(n);var o=t(1),a=t(15),r=t.n(a),c=(t(20),t(3)),u=t(0),i=function(e){return Object(u.jsxs)('div',{ children:['filter shown with ',Object(u.jsx)('input',{ value:e.filterText,onChange:e.onChange })] })},l=function(e){var n=e.person,t=e.removeContact;return Object(u.jsxs)('li',{ children:[n.name,' ',n.number,' ',Object(u.jsx)('button',{ onClick:t,children:'delete' })] })},s=function(e){return Object(u.jsxs)('form',{ onSubmit:e.formOnSubmit,children:[Object(u.jsxs)('div',{ children:['name: ',Object(u.jsx)('input',{ value:e.nameInput,onChange:e.nameOnChange }),Object(u.jsx)('br',{}),'phone: ',Object(u.jsx)('input',{ type:'tel',id:'tel',name:'tel',value:e.phoneValue,onChange:e.phoneOnChange,minLength:'10',maxLength:'10' })] }),Object(u.jsx)('div',{ children:Object(u.jsx)('button',{ type:'submit',children:'add' }) })] })},d=function(e){var n=e.message,t=e.errState;return null===n?Object(u.jsx)('div',{}):!0===t?Object(u.jsx)('div',{ className:'error',children:n }):Object(u.jsx)('div',{ className:'good',children:n })},h=t(4),m=t.n(h),f='/api/persons',b={ getAll:function(){return m.a.get(f).then((function(e){return e.data}))},create:function(e){var n=m.a.post(f,e);return console.log(n),n.then((function(e){return e.data}))},update:function(e,n){return m.a.put(f+'/'+e,n).then((function(e){return e.data}))},remove:function(e){return m.a.delete(f+'/'+e).then((function(e){return e.data}))} },j=function(){var e=Object(o.useState)([]),n=Object(c.a)(e,2),t=n[0],a=n[1],r=Object(o.useState)('a new name...'),h=Object(c.a)(r,2),m=h[0],f=h[1],j=Object(o.useState)('telephone number'),p=Object(c.a)(j,2),O=p[0],g=p[1],v=Object(o.useState)(''),x=Object(c.a)(v,2),w=x[0],C=x[1],S=Object(o.useState)(null),k=Object(c.a)(S,2),L=k[0],y=k[1],T=Object(o.useState)(!1),I=Object(c.a)(T,2),D=I[0],N=I[1],P=0===w.length?t:t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));Object(o.useEffect)((function(){console.log('effect'),b.getAll().then((function(e){console.log('promise fulfilled - data loaded'),a(e)}))}),[]),console.log('render',t,'persons');var V=function(e){var n=t.find((function(n){return n.name.toLowerCase()===e.name.toLowerCase()}));console.log('person exists @ ',n.id),window.confirm(t.find((function(n){return n.name.toLowerCase()===e.name.toLowerCase()})).name+' has already been added to the phone book! Would you like to replace the old number with a new one?')&&b.update(n.id,e).then((function(e){a(t.map((function(t){return t.id!==n.id?t:e}))),y('\''.concat(e.name,'\' has been updated with number \'').concat(e.number,'\'')),N(!1),console.log(t),f('a new name...'),g('telephone number'),setTimeout((function(){y(null)}),3e3)})).catch((function(e){N(!0),y('\''.concat(n.name,'\' has already been removed from the server')),f('a new name...'),g('telephone number'),a(t.filter((function(e){return e.id!==n.id}))),setTimeout((function(){y(null)}),3e3)}))};return Object(u.jsxs)('div',{ children:[Object(u.jsx)('h2',{ children:'Phonebook' }),Object(u.jsx)(i,{ filterValue:w,onChange:function(e){C(e.target.value)} }),Object(u.jsx)('h2',{ children:'add a new' }),Object(u.jsx)(s,{ formOnSubmit:function(e){console.log('button clicked');var n={ name:m,number:O },o=t.filter((function(e){return e.name.toLowerCase()===n.name.toLowerCase()})).length>0;console.log(o,'exists'),o?V(n):'a new name...'===n.name||'telephone number'===n.number?(e.preventDefault(),y('Please enter details other than the default!'),N(!0),setTimeout((function(){y(null)}),3e3)):(console.log('made it here for add contact path'),b.create(n).then((function(e){console.log(e,'actually printing'),a(t.concat(e)),y('\''.concat(e.name,'\' has been added to the phonebook')),N(!1),f('a new name...'),g('telephone number'),setTimeout((function(){y(null)}),3e3)})).catch((function(e){N(!0),y('Problem with addition to server'),console.log(e),setTimeout((function(){y(null)}),3e3)})))},nameInput:m,nameOnChange:function(e){console.log(e.target.value),f(e.target.value)},phoneValue:O,phoneOnChange:function(e){g(e.target.value)} }),Object(u.jsx)('h2',{ children:'Numbers' }),Object(u.jsx)(d,{ message:L,errState:D }),Object(u.jsx)('ul',{ children:P.map((function(e){return Object(u.jsx)(l,{ person:e,removeContact:function(){return function(e){var n=t.find((function(n){return n.id===e}));window.confirm('Delete '+n.name)&&(console.log('delete button has been pressed for ID',e),b.remove(e).then((function(o){y('\''.concat(n.name,'\' has been deleted')),N(!1),console.log(o,'server response'),a(t.filter((function(n){return n.id!==e}))),setTimeout((function(){y(null)}),3e3)})).catch((function(e){y('\''.concat(n.name,'\' has already been removed from the server')),N(!0),a(t.filter((function(e){return e.id!==n.id}))),setTimeout((function(){y(null)}),3e3)})))}(e.id)} },e.id)})) })] })};r.a.render(Object(u.jsx)(j,{}),document.getElementById('root'))} },[[41,1,2]]])
//# sourceMappingURL=main.bef16a60.chunk.js.map